<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title></title>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.10.1.js"></script>
    <script type="text/javascript" src="http://code.highcharts.com/highcharts.js"></script>
    <script>
      var chart; // global

      /**
      * Request data from the server, add it to the graph and set a timeout to request again
      */
      function requestData() {
        $.ajax({
          url: 'http://localhost:3000/',
          success: function(point) {
            console.log(point)
            var series = chart.series[0],
            shift = series.data.length > 20; // shift if the series is longer than 20
            // add the point
            chart.series[0].addPoint(eval(point), true, shift);
            // call it again after one second
            setTimeout(requestData, 1000);
          },
          cache: false
        });
      }

      $(document).ready(function() {
        chart = new Highcharts.Chart({
          chart: {
            renderTo: 'container',
            defaultSeriesType: 'spline',
            events: {
              load: requestData
            }
          },
          title: {
            text: 'Temperature data'
          },
          xAxis: {
            type: 'datetime',
          },
          yAxis: {
            title: {
              text: 'Temperature',
              margin: 80
            }
          },
          series: [{
            name: 'Temperature',
            data: [1]
          }]
        });
      });
    </script>

  </head>
  <body>
    <div id="container" style="width: 800px; height: 400px; margin: 0 auto"></div>

  </body>
</html>
